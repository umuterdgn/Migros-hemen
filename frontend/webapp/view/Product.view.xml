<mvc:View
  controllerName="migros.controller.Product"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core"
  displayBlock="true">

  <HBox width="100%">
    <!-- Sol Panel (Alt Kategoriler) -->
    <VBox width="25%" class="sapUiSmallMargin">
      <Text
        text="Kategori: {/view/categoryad}"
        class="sapUiSmallMarginBottom sapUiMediumMarginTop sapUiTinyMarginBegin" />
      
      <List
        headerText="Alt Kategoriler"
        items="{view>/altKategoriler}"
        itemPress=".onAltKategoriSecildi">
        <StandardListItem title="{view>ad}" />
      </List>
    </VBox>

    <!-- Sağ Panel (Ürünler) -->
    <VBox width="75%" class="sapUiSmallMargin">
      <SearchField
        placeholder="Ürün Ara..."
        liveChange=".onSearch"
        class="sapUiSmallMarginBottom" />

      <Select
        change=".onSortChange"
        selectedKey="{view>/selectedSort}"
        class="sapUiSmallMarginBottom"
        width="200px">
        <items>
          <core:Item key="" text="Sıralama Yok" />
          <core:Item key="asc" text="Fiyat Artan" />
          <core:Item key="desc" text="Fiyat Azalan" />
        </items>
      </Select>

      <!-- Ürünler Grid -->
      <FlexBox
  wrap="Wrap"
  justifyContent="Start"
  alignItems="Start"
  renderType="Bare"
  width="100%"
  items="{view>/products}">
  
  <VBox width="18%" class="sapUiSmallMarginEnd sapUiSmallMarginBottom">
    <Image src="{view>image_url}" width="80px" height="80px" class="sapUiTinyMarginBottom" />
    <Text text="{view>ad}" class="sapUiSmallMarginBottom" />
    <Text text="{= '₺' + ${view>fiyat} }" class="sapUiSmallMarginBottom" />
    <Button text="Sepete Ekle" press=".onSepeteEkle" />
  </VBox>
</FlexBox>


      <!-- Sayfa Değiştirme Butonları -->
      <HBox justifyContent="Center" class="sapUiSmallMarginTop" width="100%">
        <Button
          text="Önceki"
          press=".onPreviousPage"
          enabled="{= ${view>/page} > 1}" />
        <Text
          text="{= 'Sayfa ' + ${view>/page}}"
          class="sapUiSmallMarginLeft sapUiSmallMarginRight"
          textAlign="Center"
          width="100px" />
        <Button
          text="Sonraki"
          press=".onNextPage"
          enabled="{view>/hasNextPage}" />
      </HBox>
    </VBox>
  </HBox>
</mvc:View>
