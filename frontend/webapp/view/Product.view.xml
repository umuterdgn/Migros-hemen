<mvc:View
  controllerName="migros.controller.Product"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core"
  displayBlock="true">

  <HBox width="100%">
    <!-- Sol Panel (Alt Kategoriler) -->
    <VBox width="25%" class="sapUiSmallMargin">
      <Text
        text="{view>/categoryad}"
        class="sapUiSmallMarginBottom sapUiMediumMarginTop sapUiTinyMarginBegin" />

      <List
        headerText="Alt Kategoriler"
        items="{view>/altKategoriler}"
        itemPress=".onAltKategoriSecildi">
        <StandardListItem title="{view>ad}" type="Active" />
      </List>
    </VBox>

    <!-- Sağ Panel (Ürünler) -->
    <VBox width="75%" class="sapUiSmallMargin">
      <HBox justifyContent="SpaceBetween" class="sapUiSmallMarginBottom">
        <SearchField
          placeholder="Ürün Ara..."
          liveChange=".onSearch"
          width="60%" />

        <Select
          change=".onSortChange"
          selectedKey="{view>/selectedSort}">
          <items>
            <core:Item key="" text="Sıralama Yok" />
            <core:Item key="asc" text="Fiyat Artan" />
            <core:Item key="desc" text="Fiyat Azalan" />
          </items>
        </Select>
      </HBox>

      <!-- Ürün Kartları -->
      <FlexBox
        wrap="Wrap"
        justifyContent="Start"
        items="{view>/filtrelenmisUrunler}">

        <items>
          <VBox
            width="22%"
            class="sapUiSmallMargin"
            style="border: 1px solid #ccc; border-radius: 8px; padding: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); background-color: white;">

            <Image
              src="{view>image_url}"
              width="100%"
              height="150px"
              decorative="false"
              tooltip="{view>ad}" />

            <Text
              text="{view>ad}"
              class="sapUiTinyMarginTop sapUiTinyMarginBottom"
              wrapping="true"
              textAlign="Center"
              design="Bold" />

            <Text
              text="{view>fiyat} ₺"
              class="sapUiTinyMarginBottom"
              textAlign="Center"
              design="Bold" />

            <Button
              text="Sepete Ekle"
              icon="sap-icon://cart"
              type="Emphasized"
              width="100%"
              press=".onAddToCart" />

          </VBox>
        </items>

      </FlexBox>

      <!-- Sayfalama -->
      <HBox alignItems="Center" justifyContent="Center" class="sapUiSmallMarginTop">
        <Button text="⟨ Geri" press=".onPrevPage" enabled="{= ${view>/currentPage} > 1 }" />
        <Text text="Sayfa: {view>/currentPage}" class="sapUiTinyMargin sapUiMediumMarginBegin sapUiMediumMarginEnd" />
        <Button text="İleri ⟩" press=".onNextPage" enabled="{= ${view>/hasMorePages} }" />
      </HBox>
    </VBox>
  </HBox>
</mvc:View>
