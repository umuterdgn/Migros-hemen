<mvc:View
  controllerName="migros.controller.Product"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core"
  displayBlock="true">

  <Page enableScrolling="false" class="sapUiContentPadding"
       title="{/view/categoryad}"
       showNavButton="true"
       navButtonPress="onNavBack">
  <!-- CustomHeader tanımı -->
  <customHeader>
      <Bar>
        <contentLeft>
          <Button icon="sap-icon://nav-back" press="onNavBack" />
        </contentLeft>
        <contentMiddle>
          <Title text="{/view/categoryad}" />
        </contentMiddle>
        <contentRight>
          <Button
            icon="sap-icon://cart"
            text="Sepetim"
            press="onPressCart"
          />
        </contentRight>
      </Bar>
    </customHeader>
    <VBox fitContainer="true" height="100%">

      <HBox width="100%" height="100%">
        <!-- Sol Panel -->
        <VBox width="20%" class="sapUiSmsapUiSmallMarginEnd" style="margin-left:50px;">
          <Text text="{/view/categoryad}" design="Bold" class="sapUiSmallMarginBottom"/>
          <List id="subCategoryList" mode="SingleSelectMaster" selectionChange=".onSubCategorySelect"/>
        </VBox>

        <!-- Sağ Panel -->
        <VBox width="70%" class="sapUiSmallMargin" height="100%">
          <!-- Arama ve Sıralama -->
          <HBox justifyContent="SpaceBetween" alignItems="Center" class="sapUiSmallMarginBottom">
            <SearchField width="300px" liveChange=".onSearch" placeholder="Ürün ara..."/>
            <Select id="sortSelect" change=".onSortChange" width="250px">
              <core:Item key="priceAsc" text="Fiyat: Artan"/>
              <core:Item key="priceDesc" text="Fiyat: Azalan"/>
              <core:Item key="discountAsc" text="İndirim: Artan"/>
              <core:Item key="discountDesc" text="İndirim: Azalan"/>
              <core:Item key="nameAsc" text="Ada Göre: A-Z"/>
              <core:Item key="nameDesc" text="Ada Göre: Z-A"/>
            </Select>
          </HBox>

          <!-- Scrollable Ürün Listesi -->
          <ScrollContainer vertical="true" height="calc(100vh - 250px)">
            <HBox id="UrunList" wrap="Wrap" justifyContent="Start" alignItems="Start" class="productListContainer">
              <items>
                <VBox class="urunKart">
                 <Image width="100%" src="{src}" />
                  <Text text="{UrunList>name}" class="urunAdi sapUiSmallMarginBottom" />
                  <HBox justifyContent="Start" alignItems="Center" class="sapUiSmallMarginTop">
                    <Text text="{UrunList>oldPrice}" class="eskiFiyat" visible="{= ${UrunList>discount_type} !== 'none' }" />
                    <Text text="{UrunList>price}" class="urunFiyat sapUiSmallMarginTop" />
                  </HBox>
                  <Button icon="sap-icon://cart" type="Emphasized" class="sepeteEkleIkon" press="onSepeteEkle" />

                </VBox>
              </items>
            </HBox>
          </ScrollContainer>

          <!-- Sayfalama -->
          <HBox justifyContent="Center" class="sapUiSmallMarginTop">
            <Button text="◀ Geri" press=".onPrevPage" enabled="{/pagination/hasPrev}"/>
            <Text text="{= ${/pagination/currentPage} + ' / ' + ${/pagination/totalPages} }" class="sapUiSmallMargin sapUiTinyMarginBegin sapUiTinyMarginEnd"/>
            <Button text="İleri ▶" press=".onNextPage" enabled="{/pagination/hasNext}"/>
          </HBox>

        </VBox>
      </HBox>
    </VBox>
  </Page>
</mvc:View>
