<mvc:View
  controllerName="migros.controller.Product"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core"
  displayBlock="true">
  
  <Page
  enableScrolling="true"
  class="sapUiContentPadding"
  title="{/view/categoryad}"
  showNavButton="true"
  navButtonPress="onNavBack">

    <customHeader>
  <Bar>
    <!-- Sol: Geri butonu + Kategori Adı -->
    <contentLeft>
      <HBox alignItems="Center">
        <Button icon="sap-icon://nav-back" press="onNavBack" />
        <Text text="{/view/categoryad}" class="sapUiTinyMarginBegin sapUiSmallMarginEnd" />
      </HBox>
    </contentLeft>

    <!-- Orta: Arama kutusu -->
    <contentMiddle>
      <HBox width="100%" justifyContent="Center">
        <SearchField
  id="searchField"
  placeholder="Ürün ara..."
  width="350px"
  liveChange=".onSearch"
  class="sapUiContentPadding sapUiTinyMargin sapUiShadow sapUiRound"
/>
      </HBox>
    </contentMiddle>

    <!-- Sağ: Sepet butonu (ikon + yazı + badge) -->
    <contentRight>
      <Button
        id="btnCart"
        icon="sap-icon://cart"
        text="{= ' ' + ${cartModel>/summary/totalItems} +  ' Sepetim' }"
        press="onPressCart"
        tooltip="Sepetim"
      >
        <layoutData>
          <FlexItemData growFactor="0" />
        </layoutData>
        <customData>
          <core:CustomData key="badge" value="{cartModel>/summary/totalItems}" writeToDom="true" />
        </customData>
      </Button>
    </contentRight>
  </Bar>
</customHeader>

    <VBox fitContainer="true" height="100%">
      
      <HBox width="100%" height="100%">
        
        <!-- ========== Sol Panel ========== -->
        <VBox width="20%" class="sapUiSmallMarginBegin sapUiSmallMarginEnd">

  <!-- Alt Kategoriler Paneli -->
  <Panel
  headerText="{i18n>Kategoriler}"
    
    expandable="true"
    expanded="true"
    class="sapUiResponsiveMargin sapUiContentPadding sapUiShadow sapUiRoundedCorner sapUiTinyMarginBottom"
  >
    <List
      id="subCategoryList"
      mode="SingleSelectMaster"
      selectionChange=".onSubCategorySelect"
    />
  </Panel>

  <!-- Markalar Paneli -->
  <Panel
    headerText="Markalar"
    expandable="true"
    expanded="true"
    class="sapUiResponsiveMargin sapUiContentPadding sapUiShadow sapUiRoundedCorner"
  >
    <List
      id="brandList"
      mode="MultiSelect"
      select=".onBrandSelect"
      growing="true"
      growingThreshold="20"
    />
  </Panel>

</VBox>
        <!-- ======== Sol Panel Sonu ======== -->


        <!-- ========== Sağ Panel ========== -->
        <VBox width="70%" class="sapUiSmallMargin" height="100%">
          <!-- Arama ve Sıralama -->

<!-- Sıralama Alanı (Yerinde kalsın) -->
<Toolbar
  class="sapUiTinyMarginBottom sapUiContentPadding sapUiRoundedCorner sapUiShadow"
>
  <ToolbarSpacer />
  <Select
    id="sortSelect"
    width="220px"
    change=".onSortChange"
  >
    <core:Item key="priceAsc" text="Fiyat: Artan" />
    <core:Item key="priceDesc" text="Fiyat: Azalan" />
    <core:Item key="discountAsc" text="İndirim: Artan" />
    <core:Item key="discountDesc" text="İndirim: Azalan" />
    <core:Item key="nameAsc" text="Ada Göre: A-Z" />
    <core:Item key="nameDesc" text="Ada Göre: Z-A" />
  </Select>
</Toolbar>

          <!-- Ürün Listesi (JS ile doldurulacak) -->
          <!-- <ScrollContainer vertical="true" height="calc(100vh - 250px)"> -->
            <HBox
              id="UrunList"
              wrap="Wrap"
              justifyContent="Start"
              alignItems="Start"
              class="productListContainer"
            />
          <!-- </ScrollContainer> -->

          <!-- Sayfalama -->
          <HBox justifyContent="Center" class="sapUiSmallMarginTop">
            <Button text="◀ Geri" press=".onPrevPage" enabled="{/pagination/hasPrev}" />
            <Text
              text="{= ${/pagination/currentPage} + ' / ' + ${/pagination/totalPages} }"
              class="sapUiSmallMargin sapUiTinyMarginBegin sapUiTinyMarginEnd"
            />
            <Button text="İleri ▶" press=".onNextPage" enabled="{/pagination/hasNext}" />
          </HBox>

        </VBox>
        <!-- ======== Sağ Panel Sonu ======== -->

      </HBox>
    </VBox>

  </Page>
</mvc:View>
