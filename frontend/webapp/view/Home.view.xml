<mvc:View
  controllerName="migros.controller.Home"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core"
  xmlns:unified="sap.ui.unified"
  displayBlock="true">

  <Page title="Kategoriler">
    <HBox>
      <!-- Sidebar -->
      <VBox width="150px" class="sapUiSmallMarginEnd">
        <Button text="Ürün Ekle" press="onShowAddProduct" width="100%" />
        <Button text="Ürünler" press="onShowProductList" width="100%" class="sapUiTinyMarginTop"/>
      </VBox>

      <!-- Dinamik içerik alanı -->
      <VBox id="contentContainer" width="100%">
        <!-- Ürün Ekleme Paneli -->
        <Panel id="addProductPanel" headerText="Ürün Ekle" class="sapUiResponsiveMargin">
          <VBox class="sapUiSmallMargin">

            <Select
              items="{/categories}"
              selectedKey="{/newProduct/kategori_id}"
              change="onCategoryChange"
              width="200px">
              <core:Item key="{id}" text="{ad}" />
            </Select>

            <Select
              items="{/subcategories}"
              selectedKey="{/newProduct/subcategory_id}"
              change="onSubCategoryChange"
              width="200px">
              <core:Item key="{id}" text="{ad}" />
            </Select>

            <Input placeholder="Ürün Adı" value="{/newProduct/ad}" width="300px" />
            <Input placeholder="Fiyat" type="Number" value="{/newProduct/price}" width="300px" />
            <Input placeholder="Stok" type="Number" value="{/newProduct/stock}" width="300px" />
            <Input placeholder="İndirim Tipi (none/percent/amount)" value="{/newProduct/discount_type}" width="300px" />
            <Input placeholder="İndirim Değeri" type="Number" value="{/newProduct/discount_value}" width="300px" />

            <unified:FileUploader
              id="fileUploader"
              name="image"
              uploadUrl="http://localhost:8081/api/uploads"
              tooltip="Görsel yükle"
              uploadOnChange="true"
              buttonOnly="true"
              fileType="jpg,png,jpeg"
              change="onFileChange"
              uploadComplete="onUploadComplete"
              maximumFileSize="5"
              style="Emphasized"
              fileName="{/newProduct/image_url}"
              mimeType="image/png,image/jpeg" />

            <Image id="previewImage" visible="false" width="200px" height="auto" />

            <Button text="Ürün Ekle" press="onUrunEkle" type="Emphasized" />
          </VBox>
        </Panel>

        <!-- Ürün Listesi -->
        <Panel id="productListPanel" headerText="Ürünler" class="sapUiResponsiveMargin" visible="false">
          <VBox class="sapUiSmallMargin">
            <SearchField placeholder="Ara..." search="onSearchProduct" width="300px" />
            <Select change="onSortProduct" width="300px">
              <core:Item key="name" text="Ada göre sırala" />
              <core:Item key="price" text="Fiyata göre sırala" />
              <core:Item key="stock" text="Stoka göre sırala" />
            </Select>
            <List id="productList" items="{/productList}">
              <StandardListItem title="{name}" description="{price} ₺ / Stok: {stock}" />
            </List>
          </VBox>
        </Panel>
      </VBox>
    </HBox>

    <!-- Kategoriler alanı -->
    <HBox justifyContent="Center">
      <VBox width="100%" alignItems="Center">
        <HBox
          id="categoryContainer"
          wrap="Wrap"
          justifyContent="Center"
          alignItems="Center"
          width="calc(100% - 100px)"
          style="margin-left:50px; margin-right:50px">
        </HBox>
      </VBox>
    </HBox>
  </Page>
</mvc:View>