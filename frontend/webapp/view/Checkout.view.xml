<mvc:View
  controllerName="migros.controller.Checkout"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core"
  displayBlock="true">
  <Page title="Sipariş Oluştur" class="sapUiContentPadding">
    <HBox justifyContent="SpaceBetween" wrap="Wrap">

      <!-- Sağ sütun: sipariş özeti -->
      <VBox width="40%" class="sapUiSmallMarginBegin">
        <Panel headerText="Sepet Özeti">
          <VBox>

            <HBox justifyContent="SpaceBetween">
              <Text text="Ürünler:"/>
              <Text text="{cartModel>/summary/totalItems} adet"/>
            </HBox>
            <HBox justifyContent="SpaceBetween">
              <Text text="Ara Toplam:"/>
              <Text text="{cartModel>/summary/subtotal} ₺"/>
            </HBox>
            <HBox justifyContent="SpaceBetween">
              <Text text="İndirim:"/>
              <Text text="{cartModel>/summary/discount} ₺"/>
            </HBox>
            <HBox justifyContent="SpaceBetween">
              <Text text="Teslimat:"/>
              <Text text="{cartModel>/summary/deliveryText}"/>
            </HBox>
            <HBox justifyContent="SpaceBetween" class="sapUiSmallMarginTop">
              <Text text="Genel Toplam:" class="sapMTextBold"/>
              <Text text="{cartModel>/summary/total} ₺" class="sapMTextBold"/>
            </HBox>

          </VBox>
        </Panel>

        <!-- Para Puan Bölümü -->
        <VBox class="sapUiSmallMarginTop">
          <Text text="Para Puan" class="sapMTextBold"/>

          <HBox justifyContent="SpaceBetween">
            <Text text="Mevcut Puan:"/>
            <Text text="{checkoutModel>/moneyPoints} ₺"/>
          </HBox>

          <HBox justifyContent="SpaceBetween">
            <Text text="Kullanılacak Puan:"/>
            <Input
              value="{checkoutModel>/usePoints}"
              valueLiveUpdate="true"
              type="Number"
              placeholder="0"
              liveChange="onMoneyPointsChange"
              class="sapUiSizeCompact"/>
          </HBox>

          <HBox justifyContent="SpaceBetween">
            <Text text="Kalan Puan:"/>
            <Text text="{checkoutModel>/remainingPoints} ₺"/>
          </HBox>

          <Button
            text="Para Puan Uygula"
            type="Emphasized"
            press="onUseMoneyPoints"
            enabled="{= ${checkoutModel>/usePoints} > 0 }"
            class="sapUiSmallMarginTop"/>
        </VBox>

      </VBox>

      <!-- Sol sütun: onay butonu -->
      <VBox width="55%" fitContainer="true">
        <Button
          text="Siparişi Tamamla"
          type="Emphasized"
          press="onPlaceOrder"
          enabled="{= ${cartModel>/summary/total} > 0 }"
          class="sapUiSmallMarginTop"/>
      </VBox>

    </HBox>
  </Page>
</mvc:View>
