<mvc:View
  controllerName="migros.controller.Cart"
  xmlns="sap.m"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:core="sap.ui.core"
  displayBlock="true">

  <Page title="Sepetim" class="sapUiContentPadding">
    <!-- Ana satır: liste ve özet yan yana -->
    <HBox justifyContent="SpaceBetween" class="sapUiSmallMargin">
      
      <!-- Sol sütun: ürün listesi -->
      <VBox width="65%" fitContainer="true">
        <List
          items="{cartModel>/cartItems}"
          updateFinished="onListUpdateFinished"
          class="sapUiSmallMarginBottom"
          inset="false">
          <items>
            <CustomListItem>
              <HBox justifyContent="SpaceBetween" alignItems="Center">
                
                <Image
                  src="{cartModel>src}"
                  width="80px"
                  height="80px"/>
                
                <Text text="{cartModel>name}"/>

                <!-- StepInput fragment -->
                <core:Fragment
                  fragmentName="migros.view.fragments.StepInput"
                  type="XML"/>

                <Button
                  icon="sap-icon://delete"
                  press="onDeleteItem"
                  customData="{key:'id',value:'{cartModel>id}'}"/>
              </HBox>
            </CustomListItem>
          </items>
        </List>
      </VBox>

      <!-- Sağ sütun: sepet özeti -->
      <VBox width="30%" class="sapUiSmallMarginBegin">
        <Panel headerText="Sepet Özeti">
          <VBox>
            <HBox justifyContent="SpaceBetween">
              <Text text="Toplam Tutar:"/>
              <Text text="{cartModel>/summary/subtotal} ₺"/>
            </HBox>
            <HBox justifyContent="SpaceBetween">
              <Text text="Teslimat Tutarı:"/>
              <Text text="{cartModel>/summary/deliveryText}"/>
            </HBox>
            <HBox justifyContent="SpaceBetween">
              <Text design="Bold" text="Ödenecek Tutar:"/>
              <Text design="Bold" text="{cartModel>/summary/total} ₺"/>
            </HBox>
          </VBox>
        </Panel>
        <Button
          text="Devam Et"
          type="Emphasized"
          enabled="{= ${cartModel>/summary/subtotal} > 0 }"
          press="onCheckout"
          class="sapUiSmallMarginTop"/>
      </VBox>

    </HBox>
  </Page>
</mvc:View>
