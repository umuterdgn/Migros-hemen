<mvc:View
  controllerName="migros.controller.Cart"
  xmlns="sap.m"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:core="sap.ui.core"
  displayBlock="true">

  <Page title="Sepetim" class="sapUiContentPadding">
    <!-- Ana satır: liste ve özet yan yana -->
    <HBox justifyContent="SpaceBetween" class="sapUiSmallMargin">
      
      <!-- Sol sütun: ürün listesi -->
      <VBox width="65%" fitContainer="true">
      <List
  items="{cartModel>/cartItems}"
  class="sapUiSmallMarginBottom"
  inset="false">

  <items>
 <CustomListItem>
  <HBox
    justifyContent="Start"
    alignItems="Center"
    class="sapUiSmallMargin">

    <!-- 1) Ürün Görselü -->
    <Image
      src="{cartModel>src}"
      width="80px"
      height="80px"
      class="sapUiSmallMarginEnd" />

    <!-- 2) Ürün Adı + Sil (solda sabit) -->
    <VBox
      width="200px"
      class="sapUiSmallMarginEnd">
      <Text
        text="{cartModel>name}"
        class="sapUiMediumMarginBottom" />
      <Button
        icon="sap-icon://delete"
        text="Kaldır"
        type="Transparent"
        press="onDeleteItem">
        <customData>
          <core:CustomData
            key="id"
            value="{cartModel>id}" />
        </customData>
      </Button>
    </VBox>

    <!-- 3) Esnek boşluk -->
    <VBox>
      <layoutData>
        <FlexItemData growFactor="1" />
      </layoutData>
    </VBox>

    <!-- 4) Fiyatlar ve StepInput (en sağda) -->
    <VBox class="sapUiAlignItemsEnd">
      <Text
        text="{cartModel>oldPrice} ₺"
        visible="{= !!${cartModel>oldPrice} }"
        class="sapUiTinyMarginBottom lineThroughText" />
      <Text
        text="{cartModel>price} ₺"
        design="Bold"
        class="sapUiTinyMarginBottom" />
      <core:Fragment
        fragmentName="migros.view.fragments.StepInput"
        type="XML" />
    </VBox>

  </HBox>
</CustomListItem>


  </items>
</List>


      </VBox>

      <!-- Sağ sütun: sepet özeti -->
      <VBox width="30%" class="sapUiSmallMarginBegin">
        <Panel headerText="Sepet Özeti">
          <VBox>
            <HBox justifyContent="SpaceBetween">
              <Text text="Toplam Tutar:"/>
              <Text text="{cartModel>/summary/subtotal} ₺"/>
            </HBox>
            <HBox justifyContent="SpaceBetween">
              <Text text="Teslimat Tutarı:"/>
              <Text text="{cartModel>/summary/deliveryText}"/>
            </HBox>
            <HBox justifyContent="SpaceBetween">
              <Text design="Bold" text="Ödenecek Tutar:"/>
              <Text design="Bold" text="{cartModel>/summary/total} ₺"/>
            </HBox>
          </VBox>
        </Panel>
        <Button
          text="Devam Et"
          type="Emphasized"
          enabled="{= ${cartModel>/summary/subtotal} > 0 }"
          press="onCheckout"
          class="sapUiSmallMarginTop"/>
      </VBox>

    </HBox>
  </Page>
</mvc:View>
